!function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);var n=" badge badge-info m-1 p-3 p-md-3";function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._active=!1,this._id=i,this._parentNode=t,this._boxContainer=null,this._box=null}var t,i,n;return t=e,(i=[{key:"setActive",value:function(){this._active=!0,this._box.classList.toggle("bg-warning"),this._box.classList.toggle("bg-success")}},{key:"setInactive",value:function(){this._active=!1,this._box.classList.toggle("bg-success"),this._box.classList.toggle("bg-warning")}},{key:"setDisabled",value:function(){this._active=!1,this._box.classList.remove("bg-warning"),this._box.classList.add("bg-secondary")}},{key:"setEnabled",value:function(){this._active=!1,this._box.classList.remove("bg-secondary"),this._box.classList.add("bg-warning")}},{key:"setCSSWidth",value:function(e){this._boxContainer.style="width: ".concat(e,"%")}},{key:"init",value:function(){this._boxContainer=document.createElement("div"),this._box=document.createElement("div"),this._boxContainer.classList.add("box-container"),this._boxContainer.className+=" p-sm-2",this._box.classList.add("box"),this._box.dataset.id=this._id,this._boxContainer.appendChild(this._box),this._parentNode.appendChild(this._boxContainer)}}])&&a(t.prototype,i),n&&a(t,n),e}();function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._sizeOfSide=0,this._numerofBoxes=0,this._boxList=[],this._indexOfActive=null,this._parentNode=t,this._boxesContainer=null,this._boxesEvent=function(){},this._timeoutFunction=function(){},this._observer=null,this._mediator=null}var t,i,n;return t=e,(i=[{key:"attachObserver",value:function(e){this._observer=e}},{key:"notify",value:function(){this._observer.increasePoints()}},{key:"setMediator",value:function(e){this._mediator=e}},{key:"setSizeOfSide",value:function(e){this._sizeOfSide=e,this._numerofBoxes=e*e}},{key:"generateBoxes",value:function(e){for(var t=0;t<this._numerofBoxes;t++){var i=new s(e,t);this._boxList.push(i),i.init();var n=100/this._sizeOfSide;i.setCSSWidth(n),i.setDisabled()}}},{key:"enableBoxes",value:function(){this._boxList.forEach(function(e){e.setEnabled()})}},{key:"disableBoxes",value:function(){this._boxList.forEach(function(e){e.setDisabled()})}},{key:"continueGame",value:function(){this.clearBoard(),this.setRandomActive()}},{key:"checkClick",value:function(e){return null!==this._indexOfActive&&e.dataset.id===this._indexOfActive.toString()?"CLICK_SUCCES":(alert("straciłeś życie"),"CLICK_FAIL")}},{key:"executeFunctionByResult",value:function(e){switch(e){case"CLICK_SUCCES":this.notify();break;case"CLICK_FAIL":this._mediator.decreaseLife()}}},{key:"handleClick",value:function(e){clearTimeout(this._timeoutFunction);var t=this.checkClick(e);this.continueGame(),this.executeFunctionByResult(t)}},{key:"boxHandler",value:function(e){"div"===e.target.tagName.toLowerCase()&&e.target.classList.contains("box")&&this.handleClick(e.target)}},{key:"clearEventsForBoxes",value:function(){this._boxesEvent=function(){}}},{key:"addEventsForBoxes",value:function(){this._boxesEvent=this.boxHandler}},{key:"bindEventToBoxes",value:function(){var e=this;this._boxesContainer.addEventListener("click",function(t){e._boxesEvent(t)})}},{key:"awaitForClick",value:function(){var e=this;this._timeoutFunction=setTimeout(function(){e.continueGame(),alert("straciłeś życie"),e._mediator.decreaseLife()},2e3)}},{key:"setRandomActive",value:function(){var e,t,i,n,a=this,s=(e=0,t=this._numerofBoxes-1,i=Math.ceil(e),n=Math.floor(t),Math.floor(Math.random()*(n-i+1))+i);this._timeoutFunction=setTimeout(function(){a._indexOfActive=s,a._boxList[a._indexOfActive].setActive(),a.awaitForClick()},3e3)}},{key:"clearBoard",value:function(){clearTimeout(this._timeoutFunction),null!==this._indexOfActive&&(this._boxList[this._indexOfActive].setInactive(),this._indexOfActive=null)}},{key:"init",value:function(){this._boxesContainer=document.createElement("div"),this._boxesContainer.classList.add("boxes-container"),this._boxesContainer.className+=" m-auto row justify-content-center p-1 p-md-2",this._parentNode.appendChild(this._boxesContainer),this.generateBoxes(this._boxesContainer),this.bindEventToBoxes()}}])&&o(t.prototype,i),n&&o(t,n),e}();function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lifes=0,this._initialLifes=0,this._parentNode=t,this._timerContainer=null,this._timerSpan=null,this._mediator=null}var t,i,a;return t=e,(i=[{key:"setMediator",value:function(e){this._mediator=e}},{key:"setLifes",value:function(e){this._lifes=e,this._initialLifes=e}},{key:"resetLifes",value:function(){this._lifes=this._initialLifes,this.bindLifesToSpan()}},{key:"decreaseLifes",value:function(){this._lifes--,this.bindLifesToSpan(),0==this._lifes&&this._mediator.gameOver()}},{key:"bindLifesToSpan",value:function(){this._timerSpan.innerText="Zostało żyć: ".concat(this._lifes)}},{key:"init",value:function(){this._timerContainer=document.createElement("div"),this._timerContainer.classList.add("lifes-container"),this._parentNode.appendChild(this._timerContainer),this._timerSpan=document.createElement("span"),this._timerSpan.className+=n,this.bindLifesToSpan(),this._timerContainer.appendChild(this._timerSpan)}}])&&c(t.prototype,i),a&&c(t,a),e}();function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._time=60,this._interval=null,this._parentNode=t,this._timerContainer=null,this._timerSpan=null,this._mediator=null}var t,i,a;return t=e,(i=[{key:"setMediator",value:function(e){this._mediator=e}},{key:"bindTimeToSpan",value:function(){this._timerSpan.innerText="Pozostało: ".concat(this._time,"s")}},{key:"startTimer",value:function(){var e=this;this._time--,this._interval=setInterval(function(){e.bindTimeToSpan(),e._time--,e._time<0&&(clearInterval(e._interval),e._mediator.gameOver())},1e3)}},{key:"resetTimer",value:function(){this._time=60,this.bindTimeToSpan(),clearInterval(this._interval)}},{key:"init",value:function(){this._timerContainer=document.createElement("div"),this._timerContainer.classList.add("time-container"),this._parentNode.appendChild(this._timerContainer),this._timerSpan=document.createElement("span"),this._timerSpan.className+=n,this.bindTimeToSpan(),this._timerContainer.appendChild(this._timerSpan)}}])&&u(t.prototype,i),a&&u(t,a),e}();function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._points=0,this._parentNode=t,this._pointsContainer=null,this._pointsSpan=null,this._mediator=null}var t,i,a;return t=e,(i=[{key:"setMediator",value:function(e){this._mediator=e}},{key:"bindPointsToSpan",value:function(){this._pointsSpan.innerText="Zdobyłeś: ".concat(this._points,"pkt.")}},{key:"increasePoints",value:function(){this._points++,this.bindPointsToSpan()}},{key:"clearPoints",value:function(){this._points=0,this.bindPointsToSpan()}},{key:"init",value:function(){this._pointsContainer=document.createElement("div"),this._pointsContainer.classList.add("points-container"),this._parentNode.appendChild(this._pointsContainer),this._pointsSpan=document.createElement("span"),this._pointsSpan.className+=n,this.bindPointsToSpan(),this._pointsContainer.appendChild(this._pointsSpan)}}])&&f(t.prototype,i),a&&f(t,a),e}();function _(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(t){var i=t.timer,n=t.lifes,a=t.game,s=t.points;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._timer=i,this._timer.setMediator(this),this._lifes=n,this._lifes.setMediator(this),this._game=a,this._game.setMediator(this),this._points=s,this._points.setMediator(this)}var t,i,n;return t=e,(i=[{key:"decreaseLife",value:function(){this._lifes.decreaseLifes()}},{key:"gameOver",value:function(){var e=this._timer,t=this._points,i=this._lifes,n=this._game;alert("koniec gry! zdobyłeś ".concat(this._points._points," punktów")),T({Time:e,Points:t,Lifes:i,Game:n})}}])&&_(t.prototype,i),n&&_(t,n),e}();i.d(t,"resetAll",function(){return T});var m=document.querySelector(".game-container"),p=document.querySelector(".game-info"),b=document.querySelector(".game-info__points"),y=new l(p);y.setLifes(3);var x=new d(b),C=new h(p),k=new r(m);k.setSizeOfSide(6),k.attachObserver(x),new v({timer:C,lifes:y,game:k,points:x});!function(e){var t=!0,i=!1,n=void 0;try{for(var a,s=e[Symbol.iterator]();!(t=(a=s.next()).done);t=!0)a.value.init()}catch(e){i=!0,n=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw n}}}([y,x,C,k]);var g=document.createElement("button");g.innerText="START",g.className="btn btn-primary";var S=document.createElement("button");S.innerText="RESET",S.className="btn btn-danger";var L=document.createElement("div");L.classList.add("buttons-container"),L.className+=" row justify-content-around p-4",L.appendChild(g),L.appendChild(S),m.appendChild(L),g.addEventListener("click",function(){k.addEventsForBoxes(),k.setRandomActive(),k.enableBoxes(),C.startTimer()}),S.addEventListener("click",function(){T({Time:C,Points:x,Lifes:y,Game:k})});var T=function(e){var t=e.Time,i=e.Points,n=e.Lifes,a=e.Game;a.clearBoard(),a.clearEventsForBoxes(),a.disableBoxes(),t.resetTimer(),i.clearPoints(),n.resetLifes()}}]);
//# sourceMappingURL=app.bundle.min.js.map